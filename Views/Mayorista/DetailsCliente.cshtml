@model vercom.Models.cliente
@{
    ViewBag.Title = "DETALLES DEL CLIENTE";
}

<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>DETALLES DEL CLIENTE</h2>
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="@Url.Action("Index", "Home")">Inicio</a>
            </li>
            <li class="breadcrumb-item">
                    <a href="@Url.Action("Index", "Mayorista")">Venta mayorista</a>
            </li>
            <li class="active breadcrumb-item">
                <a href="@Url.Action("Cliente", "Mayorista")">Clientes</a>
            </li>
            <li class="active breadcrumb-item">
                <strong>Detalles del Cliente</strong>
            </li>
        </ol>
    </div>
</div>

<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox">
                <div class="ibox-title">
                    <h5>Información completa del Cliente</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                        <a class="fullscreen-link"><i class="fa fa-expand"></i></a>
                        <a class="close-link"><i class="fa fa-times"></i></a>
                    </div>
                </div>
                <div class="ibox-content">
                    <div class="row">
                        <div class="col-md-6">                           
                            <h4><strong>Nombre:</strong> @Model.nombre</h4>
                            <h4><strong>Nacionalidad:</strong> @Model.nacionalidad</h4>
                            <h4><strong>Dirección:</strong> @Model.direccion</h4>
                            <h4><strong>Provincia:</strong> @Model.provincia</h4>
                            <h4><strong>Municipio:</strong> @Model.municipio</h4>
                            <h4><strong>Localidad:</strong> @Model.localidad</h4>
                        </div>
                        <div class="col-md-6">
                            <h4><strong>Tipo de Cliente:</strong> @(Model.tipo_cliente != null ? Model.tipo_cliente.tipo : "No definido")</h4>
                            <h4><strong>NIT:</strong> @Model.nit</h4>
                            <h4><strong>REEUP:</strong> @Model.reeup</h4>
                            <h4><strong>RENAE:</strong> @Model.renae</h4>
                            <h4><strong>RENAE:</strong> @Model.renae</h4>
                        </div>
                    </div>

                    <hr>
                    <h3>Cuentas Asociadas</h3>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>                                  
                                    <th>CUENTA</th>
                                    <th>TITULAR</th>
                                    <th>AGENCIA</th>
                                    <th>BANCO</th>
                                    <th>DIRECCIÓN</th>
                                    <th>OPCIONES</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var cuenta in Model.cliente_cuenta)
                                {
                                    <tr>                                        
                                        <td>@cuenta.cuenta.no</td>
                                        <td>@cuenta.cuenta.titular</td>
                                        <td>@cuenta.cuenta.agencia</td>
                                        <td>@cuenta.cuenta.banco</td>
                                        <td>@cuenta.cuenta.direccion</td>
                                        <td>
                                            <a class="btn btn-info btn-xs" href="@Url.Action("DetailsCuenta", "Clientes", new { id = cuenta.id })"><i class="fa fa-info"></i></a>
                                            <a class="btn btn-success btn-xs" href="@Url.Action("EditCuenta", "Clientes", new { id = cuenta.id })"><i class="fa fa-edit"></i></a>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>

                    <hr>
                    <h3>Negocios Asociados</h3>
                    <div class="table-responsive">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>FECHA</th>
                                    <td>T. NEGOCIO</td>
                                    <td>PRODUCTO / SERVICIO</td>
                                    <th>FACTURA</th>
                                    <th>IMPORTE</th>
                                    <th>OPCIONES</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var negocio in Model.negocio)
                                {
                                    var importe = negocio.cantidad.HasValue && negocio.producto_servicio.precio != null ? (negocio.cantidad * negocio.producto_servicio.precio) : 0;

                                    <tr>
                                        <td>@negocio.fecha.Value.ToString("dd/MM/yyyy")</td>
                                        <td>@negocio.forma_operacion.forma</td>
                                        <td>@negocio.producto_servicio.nombre</td>
                                        <td>@negocio.factura</td>
                                        <td>@importe.Value.ToString("N2")</td>
                                        <td>
                                            <a class="btn btn-info btn-xs" href="@Url.Action("DetailsNegocio", "Mayorista", new { id = negocio.id })"><i class="fa fa-info"></i></a>
                                            <a class="btn btn-success btn-xs" href="@Url.Action("EditNegocio", "Mayorista", new { id = negocio.id })"><i class="fa fa-edit"></i></a>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>

                    <div class="text-right mt-3">
                        <a class="btn btn-default btn-rounded" href="@Url.Action("Cliente", "Mayorista")">
                            <i class="fa fa-arrow-left"></i> Volver a la lista
                        </a>
                        <a class="btn btn-outline-success btn-rounded" href="@Url.Action("EditCliente", "Mayorista", new { id = Model.id })">
                            <i class="fa fa-edit"></i> Editar Cliente
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    @Styles.Render("~/Content/plugins/dataTables/dataTablesStyles")
}

@section Scripts {
    @Scripts.Render("~/plugins/dataTables")
}
